<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ìµœì•…ì˜ ê°„ì‹ ì¸í„°ë™í‹°ë¸Œ ë¶„ì„ê¸°</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Calm Neutrals & Subtle Alerts -->
    <!-- Application Structure Plan: The application is designed as a non-linear, interactive dashboard. It starts with a visual "rogues' gallery" to hook the user. The core is an interactive dashboard where clicking a snack updates dynamic charts (comparative radar chart, individual nutrient breakdown) and informational cards (physiological impact). This is followed by collapsible sections for the "Why" (scientific deep-dive) and "How" (healthy alternatives), allowing progressive disclosure of information. This structure prioritizes user-driven exploration and visual data consumption over a passive, linear reading experience, making complex information more engaging and digestible. -->
    <!-- Visualization & Content Choices: 1. Snack Comparison: A dynamic radar chart (Chart.js) compares all 8 snacks on a user-selected metric (Calories, Sugar, etc.) for easy cross-comparison. 2. Nutrient Breakdown: Horizontal bar charts (Chart.js) show a selected snack's nutrients as a percentage of daily values, making the impact immediately understandable. 3. Physiological Impact: Icon-based cards (HTML/Tailwind) quickly convey health risks. 4. Healthy Alternatives: "Before and After" cards visually demonstrate the benefits of switching, using color-coding (red for danger, green for healthy) to reinforce the message. All choices are designed to transform the report's text into interactive, easily understandable visual formats without using SVG or Mermaid. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
            background-color: #F8F7F3;
            color: #333;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }
        .nutrient-bar-container {
            position: relative;
            width: 100%;
            height: 120px;
        }
        .snack-card {
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
        }
        .snack-card:hover, .snack-card.active {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        .snack-card.active {
            border-color: #E57373;
            border-width: 2px;
        }
        .smooth-scroll {
            scroll-behavior: smooth;
        }
        .tab-button.active {
            border-color: #E57373;
            background-color: #FEF2F2;
            color: #B91C1C;
        }
    </style>
</head>
<body class="bg-[#F8F7F3] smooth-scroll">

    <div class="container mx-auto p-4 md:p-8 max-w-7xl">
        
        <header class="text-center mb-12">
            <h1 class="text-4xl md:text-5xl font-bold text-gray-800 mb-2">í•œ ë²ˆë§Œ ë¨¹ì–´ë„ ì‚´ì°ŒëŠ” ê°„ì‹,</h1>
            <h2 class="text-2xl md:text-3xl font-bold text-[#E57373]">ê·¸ ìœ„í—˜ì„±ì„ íŒŒí—¤ì¹˜ë‹¤</h2>
            <p class="mt-4 text-gray-600 max-w-3xl mx-auto">ë§›ìˆì–´ì„œ ë¬´ì‹¬ì½” ë¨¹ì—ˆë˜ ê°„ì‹ë“¤ì´ ìš°ë¦¬ ëª¸ì— ë¯¸ì¹˜ëŠ” ì˜í–¥ì„ ê³¼í•™ì ìœ¼ë¡œ ë¶„ì„í•˜ê³ , ê±´ê°•í•œ ëŒ€ì•ˆì„ ì œì‹œí•©ë‹ˆë‹¤. ì•„ë˜ì—ì„œ ê°„ì‹ì„ ì„ íƒí•˜ì—¬ ê·¸ ì‹¤ì²´ë¥¼ í™•ì¸í•´ë³´ì„¸ìš”.</p>
        </header>

        <main>
            <section id="rogue-gallery" class="mb-16">
                <h3 class="text-2xl font-bold text-center mb-8 text-gray-700">ë¶„ì„í•  ê°„ì‹ì„ ì„ íƒí•˜ì„¸ìš”</h3>
                <div id="snack-selector" class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-8 gap-4">
                </div>
            </section>

            <section id="analysis-dashboard" class="bg-white p-6 rounded-2xl shadow-lg mb-16 min-h-[500px]">
                <div id="welcome-message" class="flex flex-col items-center justify-center text-center h-full">
                    <span class="text-5xl mb-4">ğŸ½ï¸</span>
                    <h3 class="text-2xl font-bold text-gray-700">ê°„ì‹ì„ ì„ íƒí•´ì£¼ì„¸ìš”</h3>
                    <p class="text-gray-500 mt-2">ì„ íƒí•œ ê°„ì‹ì˜ ìƒì„¸ ì˜ì–‘ ì •ë³´ì™€ ì‹ ì²´ì— ë¯¸ì¹˜ëŠ” ì˜í–¥ì„ ë³´ì—¬ë“œë¦½ë‹ˆë‹¤.</p>
                </div>
                <div id="dashboard-content" class="hidden">
                    <h2 id="snack-title" class="text-3xl font-bold text-center mb-8 text-gray-800"></h2>
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                        <div class="flex flex-col">
                            <h4 class="text-xl font-semibold mb-4 text-center text-gray-700">ì£¼ìš” ì˜ì–‘ ì„±ë¶„ ë¶„ì„</h4>
                            <div class="nutrient-bar-container">
                                <canvas id="nutrientChart"></canvas>
                            </div>
                            <div id="nutrient-details" class="mt-4 text-sm text-gray-600 bg-gray-50 p-4 rounded-lg"></div>
                        </div>
                        <div class="flex flex-col">
                            <h4 class="text-xl font-semibold mb-4 text-center text-gray-700">ì‹ ì²´ì— ë¯¸ì¹˜ëŠ” ì˜í–¥</h4>
                            <div id="impact-cards" class="grid grid-cols-2 gap-4"></div>
                        </div>
                    </div>
                </div>
            </section>

            <section id="comparison-section" class="mb-16">
                <h3 class="text-2xl font-bold text-center mb-2 text-gray-700">ê°„ì‹ë³„ ìœ„í—˜ë„ ë¹„êµ</h3>
                <p class="text-center text-gray-600 mb-6">ì•„ë˜ ë©”ë‰´ì—ì„œ ë¹„êµí•˜ê³  ì‹¶ì€ ì˜ì–‘ì†Œë¥¼ ì„ íƒí•˜ì„¸ìš”.</p>
                <div class="flex justify-center mb-4">
                    <select id="radar-metric-selector" class="p-2 border rounded-lg bg-white shadow-sm">
                        <option value="calories">ì—´ëŸ‰ (kcal)</option>
                        <option value="sugar">ì´ ë‹¹ë¥˜ (g)</option>
                        <option value="fat">í¬í™”ì§€ë°© (g)</option>
                        <option value="sodium">ë‚˜íŠ¸ë¥¨ (mg)</option>
                    </select>
                </div>
                <div class="chart-container bg-white p-4 rounded-2xl shadow-lg">
                    <canvas id="radarChart"></canvas>
                </div>
            </section>

            <section id="deep-dive" class="mb-16">
                <h3 class="text-2xl font-bold text-center mb-8 text-gray-700">ì™œ ìœ„í—˜í• ê¹Œ? ê³¼í•™ì  ì›ë¦¬ íƒêµ¬</h3>
                <div class="max-w-4xl mx-auto">
                    <div class="border-b border-gray-200">
                        <nav id="science-tabs" class="-mb-px flex space-x-4" aria-label="Tabs">
                        </nav>
                    </div>
                    <div id="science-content" class="mt-8">
                    </div>
                </div>
            </section>

            <section id="alternatives">
                <h3 class="text-2xl font-bold text-center mb-8 text-gray-700">ê·¸ë ‡ë‹¤ë©´ ëŒ€ì•ˆì€? ê±´ê°•í•œ ê°„ì‹ìœ¼ë¡œ ë°”ê¾¸ê¸°</h3>
                <div id="alternative-cards" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                </div>
            </section>
        </main>

        <footer class="text-center mt-16 pt-8 border-t border-gray-200">
            <p class="text-sm text-gray-500">ë³¸ ì •ë³´ëŠ” ì œê³µëœ ë³´ê³ ì„œë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•˜ë©°, êµìœ¡ì  ëª©ì ìœ¼ë¡œ ì œì‘ë˜ì—ˆìŠµë‹ˆë‹¤. ì •í™•í•œ ì˜ì–‘ ì •ë³´ëŠ” ì œí’ˆë³„ í‘œì‹œì‚¬í•­ì„ í™•ì¸í•˜ì„¸ìš”.</p>
        </footer>
    </div>

    <script>
        const snackData = [
            { id: 'tanghulu', name: 'íƒ•í›„ë£¨', emoji: 'ğŸ“', calories: 190, sugar: 25, fat: 0, sodium: 5, description: 'ê³¼ì¼ì´ë¼ëŠ” ê±´ê°•í•œ ì´ë¯¸ì§€ ë’¤ì— ìˆ¨ì€ ë‹¨ìˆœë‹¹ í­íƒ„. í˜ˆë‹¹ì„ ê¸‰ê²©íˆ ì˜¬ë ¤ ë¹„ë§Œì„ ë¶€ë¥´ëŠ” ì§€ë¦„ê¸¸ì…ë‹ˆë‹¤.', impacts: ['sugar_spike', 'dental_health'], alternative: { name: 'ì‹ ì„ í•œ ê³¼ì¼', improvement: 'ì²¨ê°€ë‹¹ 100% ê°ì†Œ, ì‹ì´ì„¬ìœ  ì„­ì·¨' } },
            { id: 'macaron', name: 'ë§ˆì¹´ë¡±', emoji: 'ğŸª', calories: 183, sugar: 15, fat: 5, sodium: 70, description: 'ì‘ì§€ë§Œ ê°•ë ¥í•œ ì¹¼ë¡œë¦¬. 1ê°œë§Œ ë¨¹ì–´ë„ ë°¥ ë°˜ ê³µê¸° ì—´ëŸ‰ì´ë©°, í¬ë§Œê°ì´ ì ì–´ ê³¼ì‹í•˜ê¸° ì‰½ìŠµë‹ˆë‹¤.', impacts: ['sugar_spike', 'high_fat', 'empty_calories'], alternative: { name: 'í™ˆë©”ì´ë“œ í†µë°€ ì¿ í‚¤', improvement: 'ì •ì œë‹¹ ë° í¬í™”ì§€ë°© ëŒ€í­ ê°ì†Œ' } },
            { id: 'donut', name: 'ë„ë„›', emoji: 'ğŸ©', calories: 210, sugar: 14, fat: 5.9, sodium: 227, description: 'ê¸°ë¦„ì— íŠ€ê¸´ ë°€ê°€ë£¨ì™€ ì„¤íƒ•ì˜ ì¡°í•©. íŠ¹íˆ íŠ¸ëœìŠ¤ì§€ë°©ì€ í˜ˆê´€ ê±´ê°•ì— ìµœì•…ì…ë‹ˆë‹¤.', impacts: ['sugar_spike', 'high_fat', 'trans_fat'], alternative: { name: 'ì˜¤ë¸ì— êµ¬ìš´ ë„ë„›', improvement: 'ì§€ë°© 54%, í¬í™”ì§€ë°© 49% ê°ì†Œ' } },
            { id: 'cake', name: 'ì¡°ê° ì¼€ì´í¬', emoji: 'ğŸ°', calories: 470, sugar: 28, fat: 20, sodium: 95, description: 'ìƒí¬ë¦¼, ì„¤íƒ•, ì •ì œ ë°€ê°€ë£¨ì˜ ì§‘í•©ì²´. í•œ ì¡°ê°ì— 1ì¼ ê¶Œì¥ í¬í™”ì§€ë°©ì„ í›Œì© ë„˜ê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.', impacts: ['sugar_spike', 'high_fat', 'empty_calories'], alternative: { name: 'ì €ë‹¹ í†µë°€ ì¼€ì´í¬', improvement: 'ì •ì œë‹¹, í¬í™”ì§€ë°© ëŒ€í­ ê°ì†Œ' } },
            { id: 'chips', name: 'ê°ìì¹©', emoji: 'ğŸ¥”', calories: 367, sugar: 1, fat: 14, sodium: 380, description: 'ê³ ì¹¼ë¡œë¦¬, ê³ ë‚˜íŠ¸ë¥¨, ê³ ì§€ë°©ì˜ ëŒ€í‘œì£¼ì. ì§ ë§›ê³¼ ê¸°ë¦„ì§„ ë§›ì— ë©ˆì¶œ ìˆ˜ ì—†ì´ ë¨¹ê²Œ ë©ë‹ˆë‹¤.', impacts: ['high_fat', 'high_sodium'], alternative: { name: 'ì—ì–´í”„ë¼ì´ì–´ ê°ìì¹©', improvement: 'ì§€ë°© 78%, ë‚˜íŠ¸ë¥¨ 49% ê°ì†Œ' } },
            { id: 'tteokbokki', name: 'ë–¡ë³¶ì´', emoji: 'ğŸŒ¶ï¸', calories: 295, sugar: 16, fat: 1, sodium: 1207, description: 'ì •ì œ íƒ„ìˆ˜í™”ë¬¼ ë–¡ê³¼ ê³ ë‹¹ë¶„/ê³ ë‚˜íŠ¸ë¥¨ ì–‘ë…ì˜ ë§Œë‚¨. ë‚˜íŠ¸ë¥¨ í­íƒ„ìœ¼ë¡œ ëª¸ì„ ë¶“ê²Œ ë§Œë“­ë‹ˆë‹¤.', impacts: ['sugar_spike', 'high_sodium', 'empty_calories'], alternative: { name: 'ì±„ì†Œ ë“¬ë¿ ì €ì—¼ ë–¡ë³¶ì´', improvement: 'ë‚˜íŠ¸ë¥¨ 50%, ë‹¹ë¥˜ 50% ê°ì†Œ' } },
            { id: 'ramyeon_kimbap', name: 'ë¼ë©´ê³¼ ê¹€ë°¥', emoji: 'ğŸœ', calories: 983, sugar: 10, fat: 27.7, sodium: 3062, description: 'íƒ„ìˆ˜í™”ë¬¼+íƒ„ìˆ˜í™”ë¬¼ì˜ ìµœì•…ì˜ ì¡°í•©. í˜ˆë‹¹ ë¡¤ëŸ¬ì½”ìŠ¤í„°ì™€ ë‚˜íŠ¸ë¥¨ ê³¼ë‹¤ ì„­ì·¨ë¥¼ ìœ ë°œí•©ë‹ˆë‹¤.', impacts: ['sugar_spike', 'high_sodium', 'over_calories'], alternative: { name: 'ì±„ì†Œ ë¼ë©´ + í˜„ë¯¸ ê¹€ë°¥', improvement: 'ë‚˜íŠ¸ë¥¨, ì •ì œíƒ„ìˆ˜í™”ë¬¼ ê°ì†Œ, ì‹ì´ì„¬ìœ  ì¦ê°€' } },
            { id: 'soda', name: 'ê°€ë‹¹ìŒë£Œ', emoji: 'ğŸ¥¤', calories: 152, sugar: 38, fat: 0, sodium: 15, description: 'ë§ˆì‹œëŠ” ì„¤íƒ•ë¬¼. í¬ë§Œê° ì—†ì´ ë†’ì€ ì¹¼ë¡œë¦¬ë¥¼ ê·¸ëŒ€ë¡œ í¡ìˆ˜ì‹œì¼œ ì§€ë°©ìœ¼ë¡œ ì‰½ê²Œ ì „í™˜ë©ë‹ˆë‹¤.', impacts: ['sugar_spike', 'empty_calories', 'fatty_liver'], alternative: { name: 'íƒ„ì‚°ìˆ˜ì™€ ë ˆëª¬', improvement: 'ë‹¹ë¥˜ 100% ê°ì†Œ' } },
        ];

        const impactData = {
            sugar_spike: { icon: 'ğŸ©¸ğŸ“ˆ', title: 'í˜ˆë‹¹ ìŠ¤íŒŒì´í¬', description: 'ë‹¨ìˆœë‹¹ì´ í˜ˆë‹¹ì„ ê¸‰ê²©íˆ ì˜¬ë ¤ ì¸ìŠë¦° ì €í•­ì„± ë° ë‹¹ë‡¨ ìœ„í—˜ì„ ë†’ì…ë‹ˆë‹¤.' },
            high_fat: { icon: 'ğŸ§ˆâš ï¸', title: 'ê³¼ë„í•œ í¬í™”ì§€ë°©', description: 'ë‚˜ìœ ì½œë ˆìŠ¤í…Œë¡¤(LDL) ìˆ˜ì¹˜ë¥¼ ë†’ì—¬ ì‹¬í˜ˆê´€ ì§ˆí™˜ì˜ ìœ„í—˜ì„ ì¦ê°€ì‹œí‚µë‹ˆë‹¤.' },
            trans_fat: { icon: 'â¤ï¸â€ğŸ©¹', title: 'íŠ¸ëœìŠ¤ì§€ë°© ìœ„í—˜', description: 'LDL ì½œë ˆìŠ¤í…Œë¡¤ì€ ë†’ì´ê³  ì¢‹ì€ HDL ì½œë ˆìŠ¤í…Œë¡¤ì€ ë‚®ì¶° í˜ˆê´€ ê±´ê°•ì— ì¹˜ëª…ì ì…ë‹ˆë‹¤.' },
            high_sodium: { icon: 'ğŸ§‚ğŸ’§', title: 'ë†’ì€ ë‚˜íŠ¸ë¥¨', description: 'ëª¸ì„ ë¶“ê²Œ í•˜ê³  ì¥ê¸°ì ìœ¼ë¡œ í˜ˆì••ì„ ë†’ì—¬ ê³ í˜ˆì••ì˜ ì›ì¸ì´ ë©ë‹ˆë‹¤.' },
            empty_calories: { icon: 'ğŸ‘»âš¡', title: 'ë¹ˆ ì¹¼ë¡œë¦¬', description: 'ì˜ì–‘ì†Œ ì—†ì´ ì—´ëŸ‰ë§Œ ë†’ì•„ í¬ë§Œê°ì„ ì£¼ì§€ ëª»í•˜ê³  ê³¼ì‹ì„ ìœ ë°œí•©ë‹ˆë‹¤.' },
            over_calories: { icon: 'ğŸ’¥ğŸ½ï¸', title: 'ì¹¼ë¡œë¦¬ í­íƒ„', description: 'í•œ ë¼ ì‹ì‚¬ë¥¼ ì´ˆê³¼í•˜ëŠ” ì—´ëŸ‰ìœ¼ë¡œ ì²´ì¤‘ ì¦ê°€ì˜ ì§ì ‘ì ì¸ ì›ì¸ì´ ë©ë‹ˆë‹¤.' },
            dental_health: { icon: 'ğŸ¦·ğŸ˜¥', title: 'ì¹˜ì•„ ê±´ê°• ìœ„í˜‘', description: 'ëˆì í•œ ì„¤íƒ•ì´ ì¹˜ì•„ì— ë‹¬ë¼ë¶™ì–´ ì¶©ì¹˜ ë° ì†ìƒ ìœ„í—˜ì„ ë†’ì…ë‹ˆë‹¤.' },
            fatty_liver: { icon: 'ğŸºâ¡ï¸è‚', title: 'ì§€ë°©ê°„ ìœ„í—˜', description: 'ì•¡ìƒê³¼ë‹¹ì€ ê°„ì—ì„œ ì§€ë°©ìœ¼ë¡œ ì‰½ê²Œ ì „í™˜ë˜ì–´ ë¹„ì•Œì½”ì˜¬ì„± ì§€ë°©ê°„ì„ ìœ ë°œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.' }
        };
        
        const scienceData = [
            { 
                id: 'science1', 
                title: 'í˜ˆë‹¹ ë¡¤ëŸ¬ì½”ìŠ¤í„°', 
                content: `ë‹¨ìˆœë‹¹ê³¼ ì •ì œ íƒ„ìˆ˜í™”ë¬¼ì´ ë§ì€ ê°„ì‹ì€ í˜ˆë‹¹ì„ ë§¤ìš° ë¹ ë¥´ê²Œ ë†’ì´ëŠ” 'í˜ˆë‹¹ ìŠ¤íŒŒì´í¬'ë¥¼ ìœ ë°œí•©ë‹ˆë‹¤. ì´ì— ìš°ë¦¬ ëª¸ì€ ë‹¤ëŸ‰ì˜ ì¸ìŠë¦°ì„ ë¶„ë¹„í•´ í˜ˆë‹¹ì„ ê¸‰ê²©íˆ ë–¨ì–´ëœ¨ë¦¬ì£ . ì´ ê³¼ì •ì´ ë°˜ë³µë˜ë©´ ì„¸í¬ê°€ ì¸ìŠë¦°ì— ë‘”ê°í•´ì§€ëŠ” 'ì¸ìŠë¦° ì €í•­ì„±'ì´ ìƒê²¨ ì œ2í˜• ë‹¹ë‡¨ë³‘, ë¹„ë§Œ, ëŒ€ì‚¬ ì¦í›„êµ°ì˜ ì›ì¸ì´ ë©ë‹ˆë‹¤.`
            },
            { 
                id: 'science2', 
                title: 'ë‚˜ìœ ì§€ë°©ì˜ ê³¼í•™', 
                content: `ëª¨ë“  ì§€ë°©ì´ ê°™ì§€ ì•ŠìŠµë‹ˆë‹¤. íŠ€ê¸´ ìŒì‹ì´ë‚˜ ê°€ê³µì‹í’ˆì— ë§ì€ í¬í™”ì§€ë°©ê³¼ íŠ¸ëœìŠ¤ì§€ë°©ì€ í˜ˆê´€ì— 'ë‚˜ìœ' LDL ì½œë ˆìŠ¤í…Œë¡¤ì„ ìŒ“ì´ê²Œ í•©ë‹ˆë‹¤. íŠ¹íˆ íŠ¸ëœìŠ¤ì§€ë°©ì€ 'ì¢‹ì€' HDL ì½œë ˆìŠ¤í…Œë¡¤ê¹Œì§€ ë‚®ì¶° ë™ë§¥ê²½í™”, ì‹¬ê·¼ê²½ìƒ‰ ë“± ì‹¬í˜ˆê´€ ì§ˆí™˜ì˜ ìœ„í—˜ì„ ê·¹ì ìœ¼ë¡œ ë†’ì´ëŠ” ìµœì•…ì˜ ì§€ë°©ì…ë‹ˆë‹¤.`
            },
            { 
                id: 'science3', 
                title: 'ë‚˜íŠ¸ë¥¨ì˜ ìŠµê²©', 
                content: `ì§  ê°„ì‹ì„ ë¨¹ìœ¼ë©´ ëª¸ì´ ë¶“ëŠ” ì´ìœ ëŠ” ë‚˜íŠ¸ë¥¨ì´ ì²´ë‚´ ìˆ˜ë¶„ì„ ë¶™ì¡ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. ì´ëŠ” ì¼ì‹œì ìœ¼ë¡œ ì²´ì¤‘ì„ ëŠ˜ë¦¬ê³  í˜ˆì•¡ëŸ‰ì„ ì¦ê°€ì‹œì¼œ í˜ˆì••ì„ ë†’ì…ë‹ˆë‹¤. ë§Œì„±ì ì¸ ë‚˜íŠ¸ë¥¨ ê³¼ë‹¤ ì„­ì·¨ëŠ” ê³ í˜ˆì••ì˜ ì§ì ‘ì ì¸ ì›ì¸ì´ ë˜ì–´ ì‹¬ì¥ê³¼ ì‹ ì¥ì— í° ë¶€ë‹´ì„ ì¤ë‹ˆë‹¤.`
            },
            { 
                id: 'science4', 
                title: 'ë¹ˆ ì¹¼ë¡œë¦¬ì˜ í•¨ì •', 
                content: `'ë¹ˆ ì¹¼ë¡œë¦¬' ì‹í’ˆì€ ë¹„íƒ€ë¯¼, ë¯¸ë„¤ë„, ì‹ì´ì„¬ìœ  ê°™ì€ í•„ìˆ˜ ì˜ì–‘ì†ŒëŠ” ê±°ì˜ ì—†ì´ ì—´ëŸ‰ë§Œ ë†’ìŠµë‹ˆë‹¤. í¬ë§Œê°ì„ ì£¼ëŠ” ë‹¨ë°±ì§ˆì´ë‚˜ ì‹ì´ì„¬ìœ ê°€ ì—†ì–´ ë§ì´ ë¨¹ì–´ë„ ë§Œì¡±ê°ì„ ëŠë¼ê¸° ì–´ë µê³ , ë‡ŒëŠ” ê³„ì†í•´ì„œ í—ˆê¸° ì‹ í˜¸ë¥¼ ë³´ë‚´ ê²°êµ­ ê³¼ì‹ìœ¼ë¡œ ì´ì–´ì§€ëŠ” ì•…ìˆœí™˜ì„ ë§Œë“­ë‹ˆë‹¤.`
            }
        ];

        let nutrientChart, radarChart;

        document.addEventListener('DOMContentLoaded', () => {
            const snackSelector = document.getElementById('snack-selector');
            const alternativeCards = document.getElementById('alternative-cards');
            const scienceTabs = document.getElementById('science-tabs');
            const scienceContent = document.getElementById('science-content');

            snackData.forEach(snack => {
                const card = document.createElement('div');
                card.className = 'snack-card cursor-pointer bg-white p-4 rounded-lg shadow-md border-2 border-transparent text-center';
                card.dataset.id = snack.id;
                card.innerHTML = `<div class="text-4xl mb-2">${snack.emoji}</div><h4 class="font-semibold">${snack.name}</h4>`;
                card.addEventListener('click', () => selectSnack(snack.id));
                snackSelector.appendChild(card);

                const altCard = document.createElement('div');
                altCard.className = 'bg-white p-6 rounded-2xl shadow-lg flex flex-col justify-between';
                altCard.innerHTML = `
                    <div>
                        <div class="flex justify-between items-start mb-4">
                            <div>
                                <p class="text-sm text-gray-500">ëŒ€ìƒì´ ë˜ëŠ” ê°„ì‹</p>
                                <h4 class="text-xl font-bold text-red-500">${snack.emoji} ${snack.name}</h4>
                            </div>
                            <span class="text-2xl transform rotate-45 text-gray-400">&rarr;</span>
                        </div>
                        <div>
                            <p class="text-sm text-gray-500">ê±´ê°•í•œ ëŒ€ì•ˆ</p>
                            <h4 class="text-xl font-bold text-green-600">${snack.alternative.name}</h4>
                        </div>
                    </div>
                    <div class="mt-4 pt-4 border-t">
                        <p class="font-semibold text-green-700">âœ¨ ê°œì„  íš¨ê³¼</p>
                        <p class="text-sm text-gray-600">${snack.alternative.improvement}</p>
                    </div>
                `;
                alternativeCards.appendChild(altCard);
            });
            
            scienceData.forEach((item, index) => {
                const tabButton = document.createElement('button');
                tabButton.className = 'tab-button whitespace-nowrap py-3 px-4 border-b-2 font-medium text-sm text-gray-500 hover:text-gray-700 hover:border-gray-300';
                tabButton.textContent = item.title;
                tabButton.dataset.target = item.id;
                if (index === 0) {
                    tabButton.classList.add('active');
                }
                tabButton.addEventListener('click', () => {
                    document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
                    tabButton.classList.add('active');
                    displayScienceContent(item.id);
                });
                scienceTabs.appendChild(tabButton);
            });
            
            displayScienceContent(scienceData[0].id);
            setupRadarChart();
            document.getElementById('radar-metric-selector').addEventListener('change', (e) => updateRadarChart(e.target.value));
        });
        
        function displayScienceContent(id) {
            const contentData = scienceData.find(item => item.id === id);
            const scienceContentEl = document.getElementById('science-content');
            scienceContentEl.innerHTML = `<div class="bg-white p-6 rounded-lg shadow-inner"><p class="text-gray-700 leading-relaxed">${contentData.content}</p></div>`;
        }

        function selectSnack(snackId) {
            const selectedSnack = snackData.find(s => s.id === snackId);
            
            document.getElementById('welcome-message').classList.add('hidden');
            document.getElementById('dashboard-content').classList.remove('hidden');

            document.querySelectorAll('.snack-card').forEach(card => {
                card.classList.remove('active');
                if (card.dataset.id === snackId) {
                    card.classList.add('active');
                }
            });

            document.getElementById('snack-title').textContent = `${selectedSnack.emoji} ${selectedSnack.name}`;
            
            const nutrientDetailsEl = document.getElementById('nutrient-details');
            nutrientDetailsEl.innerHTML = `<p>${selectedSnack.description}</p>`;

            const impactCardsEl = document.getElementById('impact-cards');
            impactCardsEl.innerHTML = '';
            selectedSnack.impacts.forEach(impactId => {
                const impact = impactData[impactId];
                const card = document.createElement('div');
                card.className = 'bg-red-50 p-4 rounded-lg';
                card.innerHTML = `
                    <div class="flex items-center mb-2">
                        <span class="text-2xl mr-2">${impact.icon}</span>
                        <h5 class="font-bold text-red-800">${impact.title}</h5>
                    </div>
                    <p class="text-xs text-red-700">${impact.description}</p>
                `;
                impactCardsEl.appendChild(card);
            });

            updateNutrientChart(selectedSnack);
            
            document.getElementById('analysis-dashboard').scrollIntoView({ behavior: 'smooth' });
        }

        function updateNutrientChart(snack) {
            const dailyValues = { sugar: 50, fat: 15, sodium: 2000 };
            const data = {
                labels: ['ì´ ë‹¹ë¥˜ (g)', 'í¬í™”ì§€ë°© (g)', 'ë‚˜íŠ¸ë¥¨ (mg)'],
                datasets: [{
                    label: snack.name,
                    data: [
                        (snack.sugar / dailyValues.sugar) * 100,
                        (snack.fat / dailyValues.fat) * 100,
                        (snack.sodium / dailyValues.sodium) * 100
                    ],
                    backgroundColor: ['#F87171', '#FBBF24', '#60A5FA'],
                    borderColor: ['#EF4444', '#D97706', '#2563EB'],
                    borderWidth: 1
                }]
            };

            const ctx = document.getElementById('nutrientChart').getContext('2d');
            if (nutrientChart) {
                nutrientChart.destroy();
            }
            nutrientChart = new Chart(ctx, {
                type: 'bar',
                data: data,
                options: {
                    indexAxis: 'y',
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    let label = context.dataset.label || '';
                                    if (label) {
                                        label += ': ';
                                    }
                                    if (context.parsed.x !== null) {
                                        label += `${context.parsed.x.toFixed(1)}% (1ì¼ ê¶Œì¥ëŸ‰ ëŒ€ë¹„)`;
                                    }
                                    return label;
                                }
                            }
                        }
                    },
                    scales: {
                        x: {
                            beginAtZero: true,
                            max: 150,
                            ticks: {
                                callback: function(value) {
                                    return value + '%';
                                }
                            }
                        }
                    }
                }
            });
        }

        function setupRadarChart() {
            const ctx = document.getElementById('radarChart').getContext('2d');
            radarChart = new Chart(ctx, {
                type: 'radar',
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { position: 'top' },
                        tooltip: {
                            callbacks: {
                                title: function(tooltipItems) {
                                    return tooltipItems[0].label;
                                },
                                label: function(context) {
                                    return `${context.dataset.label}: ${context.formattedValue}`;
                                }
                            }
                        }
                    },
                    scales: {
                        r: {
                            angleLines: { display: false },
                            suggestedMin: 0,
                            pointLabels: {
                                font: { size: 12 }
                            }
                        }
                    }
                }
            });
            updateRadarChart('calories');
        }

        function updateRadarChart(metric) {
            const labels = snackData.map(s => s.name);
            const dataPoints = snackData.map(s => s[metric]);

            radarChart.data = {
                labels: labels,
                datasets: [{
                    label: document.querySelector(`#radar-metric-selector option[value=${metric}]`).textContent,
                    data: dataPoints,
                    fill: true,
                    backgroundColor: 'rgba(229, 115, 115, 0.2)',
                    borderColor: 'rgb(229, 115, 115)',
                    pointBackgroundColor: 'rgb(229, 115, 115)',
                    pointBorderColor: '#fff',
                    pointHoverBackgroundColor: '#fff',
                    pointHoverBorderColor: 'rgb(229, 115, 115)'
                }]
            };
            radarChart.update();
        }

    </script>
</body>
</html>
